(function(a){'use strict';'function'==typeof define&&define.amd?define(['jquery'],a):'object'==typeof exports?a(require('jquery')):a(window.jQuery)})(function(a){'use strict';var b=0,c=a,d='parseJSON';'JSON'in window&&'parse'in JSON&&(c=JSON,d='parse'),a.ajaxTransport('iframe',function(f){if(f.async){var h,i,j,g=f.initialIframeSrc||'javascript:false;';return{send:function(k,l){h=a('<form style="display:none;"></form>'),h.attr('accept-charset',f.formAcceptCharset),j=/\?/.test(f.url)?'&':'?','DELETE'===f.type?(f.url=f.url+j+'_method=DELETE',f.type='POST'):'PUT'===f.type?(f.url=f.url+j+'_method=PUT',f.type='POST'):'PATCH'===f.type&&(f.url=f.url+j+'_method=PATCH',f.type='POST'),b+=1,i=a('<iframe src="'+g+'" name="iframe-transport-'+b+'"></iframe>').bind('load',function(){var m,n=a.isArray(f.paramName)?f.paramName:[f.paramName];i.unbind('load').bind('load',function(){var o;try{if(o=i.contents(),!o.length||!o[0].firstChild)throw new Error}catch(p){o=void 0}l(200,'success',{iframe:o}),a('<iframe src="'+g+'"></iframe>').appendTo(h),window.setTimeout(function(){h.remove()},0)}),h.prop('target',i.prop('name')).prop('action',f.url).prop('method',f.type),f.formData&&a.each(f.formData,function(o,p){a('<input type="hidden"/>').prop('name',p.name).val(p.value).appendTo(h)}),f.fileInput&&f.fileInput.length&&'POST'===f.type&&(m=f.fileInput.clone(),f.fileInput.after(function(o){return m[o]}),f.paramName&&f.fileInput.each(function(o){a(this).prop('name',n[o]||f.paramName)}),h.append(f.fileInput).prop('enctype','multipart/form-data').prop('encoding','multipart/form-data'),f.fileInput.removeAttr('form')),h.submit(),m&&m.length&&f.fileInput.each(function(o,p){var q=a(m[o]);a(p).prop('name',q.prop('name')).attr('form',q.attr('form')),q.replaceWith(p)})}),h.append(i).appendTo(document.body)},abort:function(){i&&i.unbind('load').prop('src',g),h&&h.remove()}}}}),a.ajaxSetup({converters:{'iframe text':function(f){return f&&a(f[0].body).text()},'iframe json':function(f){return f&&c[d](a(f[0].body).text())},'iframe html':function(f){return f&&a(f[0].body).html()},'iframe xml':function(f){var g=f&&f[0];return g&&a.isXMLDoc(g)?g:a.parseXML(g.XMLDocument&&g.XMLDocument.xml||a(g.body).html())},'iframe script':function(f){return f&&a.globalEval(a(f[0].body).text())}}})});
